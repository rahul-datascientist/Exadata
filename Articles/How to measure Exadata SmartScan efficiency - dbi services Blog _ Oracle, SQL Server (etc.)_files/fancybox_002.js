(function(){var e=function(e){var t=this;e.require().stylesheet("fancybox/default").done(function(){var n=function(){(function(t,n){var r=e(t),i=e(n),s=e.fancybox=function(){s.open.apply(this,arguments)},o=!1,u=null;e.extend(s,{version:"2.0.4",defaults:{padding:15,margin:20,width:800,height:600,minWidth:200,minHeight:200,maxWidth:9999,maxHeight:9999,autoSize:!0,fitToView:!0,aspectRatio:!1,topRatio:.5,fixed:(!e.browser.msie||e.browser.version>6)&&typeof n.createTouch=="undefined",scrolling:"auto",wrapCSS:"fancybox-default",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,modal:!1,loop:!0,ajax:{dataType:"html"},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0" '+(e.browser.msie?'allowtransparency="true""':"")+"></iframe>",swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<div title="Close" class="fancybox-item fancybox-close"></div>',next:'<a title="Next" class="fancybox-item fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-item fancybox-prev"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:300,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:300,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:300,opacity:.8,css:{cursor:"pointer"},closeClick:!0},title:{type:"float"}},onCancel:e.noop,beforeLoad:e.noop,afterLoad:e.noop,beforeShow:e.noop,afterShow:e.noop,beforeClose:e.noop,afterClose:e.noop},group:{},opts:{},coming:null,current:null,isOpen:!1,isOpened:!1,wrap:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(t,n){e.isArray(t)||(t=t.jquery?e(t).get():[t]);if(!t.length)return;s.close(!0),s.isActive=!0,s.opts=e.extend(!0,{},s.defaults,n),s.group=t,s._start(s.opts.index||0)},cancel:function(){if(s.coming&&!1===s.trigger("onCancel"))return;s.coming=null,s.hideLoading(),s.ajaxLoad&&s.ajaxLoad.abort(),s.ajaxLoad=null,s.imgPreload&&(s.imgPreload.onload=s.imgPreload.onabort=s.imgPreload.onerror=null)},close:function(t){s.cancel();if(!s.current||!1===s.trigger("beforeClose"))return;s.unbindEvents(),!s.isOpen||t&&t[0]===!0?(e(".fancybox-wrap").stop().trigger("onReset").remove(),s._afterZoomOut()):(s.isOpen=s.isOpened=!1,e(".fancybox-item").remove(),s.wrap.stop(!0).removeClass("fancybox-opened"),s.inner.css("overflow","hidden"),s.transitions[s.current.closeMethod]())},play:function(t){var n=function(){clearTimeout(s.player.timer)},r=function(){n(),s.current&&s.player.isActive&&(s.player.timer=setTimeout(s.next,s.current.playSpeed))},i=function(){n(),e("body").unbind(".player"),s.player.isActive=!1,s.trigger("onPlayEnd")},o=function(){s.current&&(s.current.loop||s.current.index<s.group.length-1)&&(s.player.isActive=!0,e("body").bind({"afterShow.player onUpdate.player":r,"onCancel.player beforeClose.player":i,"beforeLoad.player":n}),r(),s.trigger("onPlayStart"))};s.player.isActive||t&&t[0]===!1?i():o()},next:function(){s.current&&s.jumpto(s.current.index+1)},prev:function(){s.current&&s.jumpto(s.current.index-1)},jumpto:function(e){if(!s.current)return;e=parseInt(e,10),s.group.length>1&&s.current.loop&&(e<s.group.length?e<0&&(e=s.group.length-1):e=0),typeof s.group[e]!="undefined"&&(s.cancel(),s._start(e))},reposition:function(e){s.isOpen&&s.wrap.css(s._getPosition(e))},update:function(){s.isOpen&&(o||(u=setTimeout(function(){o&&(o=!1,s.current&&(s.current.autoSize&&(s.inner.height("auto"),s.current.height=s.inner.height()),s._setDimension(),s.current.canGrow&&s.inner.height("auto"),s.reposition(),s.trigger("onUpdate")))},100)),o=!0)},toggle:function(){s.isOpen&&(s.current.fitToView=!s.current.fitToView,s.update())},hideLoading:function(){e("#fancybox-loading").remove()},showLoading:function(){s.hideLoading(),e('<div id="fancybox-loading"><div></div></div>').click(s.cancel).appendTo("body")},getViewport:function(){return{x:r.scrollLeft(),y:r.scrollTop(),w:r.width(),h:r.height()}},unbindEvents:function(){s.wrap&&s.wrap.unbind(".fb"),i.unbind(".fb"),r.unbind(".fb")},bindEvents:function(){var t=s.current,n=t.keys;if(!t)return;r.bind("resize.fb, orientationchange.fb",s.update),n&&i.bind("keydown.fb",function(t){var r;!t.ctrlKey&&!t.altKey&&!t.shiftKey&&!t.metaKey&&e.inArray(t.target.tagName.toLowerCase(),["input","textarea","select","button"])<0&&(r=t.keyCode,e.inArray(r,n.close)>-1?(s.close(),t.preventDefault()):e.inArray(r,n.next)>-1?(s.next(),t.preventDefault()):e.inArray(r,n.prev)>-1&&(s.prev(),t.preventDefault()))}),e.fn.mousewheel&&t.mouseWheel&&s.group.length>1&&s.wrap.bind("mousewheel.fb",function(t,n){var r=e(t.target).get(0);if(r.clientHeight===0||r.scrollHeight===r.clientHeight&&r.scrollWidth===r.clientWidth)t.preventDefault(),s[n>0?"prev":"next"]()})},trigger:function(t){var n,r=s[e.inArray(t,["onCancel","beforeLoad","afterLoad"])>-1?"coming":"current"];if(!r)return;e.isFunction(r[t])&&(n=r[t].apply(r,Array.prototype.slice.call(arguments,1)));if(n===!1)return!1;r.helpers&&e.each(r.helpers,function(n,i){i&&typeof s.helpers[n]!="undefined"&&e.isFunction(s.helpers[n][t])&&s.helpers[n][t](i,r)}),e.event.trigger(t+".fb")},isImage:function(e){return e&&e.match(/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i)},isSWF:function(e){return e&&e.match(/\.(swf)(.*)?$/i)},_start:function(t){var n={},r=s.group[t]||null,i,o,u,a;r&&typeof r=="object"&&(r.nodeType||r instanceof e)&&(i=!0,e.metadata&&(n=e(r).metadata())),n=e.extend(!0,{},s.opts,{index:t,element:r},e.isPlainObject(r)?r:n),e.each(["href","title","content","type"],function(t,o){n[o]=s.opts[o]||i&&e(r).attr(o)||n[o]||null}),typeof n.margin=="number"&&(n.margin=[n.margin,n.margin,n.margin,n.margin]),n.modal&&e.extend(!0,n,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:!1}}}),s.coming=n;if(!1===s.trigger("beforeLoad")){s.coming=null;return}u=n.type,o=n.href,u||(i&&(a=e(r).data("fancybox-type"),!a&&r.className&&(a=r.className.match(/fancybox\.(\w+)/),u=a?a[1]:null)),!u&&o&&(s.isImage(o)?u="image":s.isSWF(o)?u="swf":o.match(/^#/)&&(u="inline")),u||(u=i?"inline":"html"),n.type=u),u==="inline"||u==="html"?(n.content=n.content||(u==="inline"&&o?e(o):e(r)),n.content.length||(u=null)):(n.href=o||r,n.href||(u=null)),n.group=s.group,n.isDom=i,u==="image"?s._loadImage():u==="ajax"?s._loadAjax():u?s._afterLoad():s._error("type")},_error:function(t){s.hideLoading(),e.extend(s.coming,{type:"html",autoSize:!0,minHeight:0,hasError:t,content:s.coming.tpl.error}),s._afterLoad()},_loadImage:function(){s.imgPreload=new Image,s.imgPreload.onload=function(){this.onload=this.onerror=null,s.coming.width=this.width,s.coming.height=this.height,s._afterLoad()},s.imgPreload.onerror=function(){this.onload=this.onerror=null,s._error("image")},s.imgPreload.src=s.coming.href,s.imgPreload.width||s.showLoading()},_loadAjax:function(){s.showLoading(),s.ajaxLoad=e.ajax(e.extend({},s.coming.ajax,{url:s.coming.href,error:function(e,t){t!=="abort"?s._error("ajax",e):s.hideLoading()},success:function(e,t){t==="success"&&(s.coming.content=e,s._afterLoad())}}))},_preload:function(){var t=s.group,n=s.current.index;t.length>1&&((new Image).src=e(t[n+1]||t[0]).attr("href"),(new Image).src=e(t[n-1]||t[t.length-1]).attr("href"))},_afterLoad:function(){s.hideLoading();if(!s.coming||!1===s.trigger("afterLoad",s.current)){s.coming=!1;return}s.isOpened?(e(".fancybox-item").remove(),s.wrap.stop(!0).removeClass("fancybox-opened"),s.inner.css("overflow","hidden"),s.transitions[s.current.prevMethod]()):(e(".fancybox-wrap").stop().trigger("onReset").remove(),s.trigger("afterClose")),s.unbindEvents(),s.isOpen=!1,s.current=s.coming,s.coming=!1,s.wrap=e(s.current.tpl.wrap).addClass("fancybox-tmp "+s.current.wrapCSS).appendTo("body"),s.outer=e(".fancybox-outer",s.wrap).css("padding",s.current.padding+"px"),s.inner=e(".fancybox-inner",s.wrap),s._setContent()},_setContent:function(){var t,n,r,i=s.current,o=i.type;switch(o){case"inline":case"ajax":case"html":t=i.content,o==="inline"&&t instanceof e&&(t=t.show().detach(),t.parent().hasClass("fancybox-inner")&&t.parents(".fancybox-wrap").trigger("onReset").remove(),e(s.wrap).bind("onReset",function(){t.appendTo("body").hide()})),i.autoSize&&(n=e('<div class="fancybox-tmp"></div>').appendTo("body").append(t),i.width=n.width(),i.height=n.height(),n.width(s.current.width),n.height()>i.height&&(n.width(i.width+1),i.width=n.width(),i.height=n.height()),t=n.contents().detach(),n.remove());break;case"image":t=i.tpl.image.replace("{href}",i.href),i.aspectRatio=!0;break;case"swf":t=i.tpl.swf.replace(/\{width\}/g,i.width).replace(/\{height\}/g,i.height).replace(/\{href\}/g,i.href)}if(o==="iframe"){t=e(i.tpl.iframe.replace("{rnd}",(new Date).getTime())).attr({scrolling:i.scrolling,src:i.href}).appendTo(s.inner),i.scrolling="auto";if(i.autoSize){s.wrap.width(i.width),s.showLoading(),t.data("ready",!1).bind("load",function(){var t=e(this),n;try{this.contentWindow.document.location&&(n=t.contents().find("body").height()+12,t.height(n))}catch(r){i.autoSize=!1}t.data("ready")===!1?(s.hideLoading(),n&&(s.current.height=n),s._beforeShow(),t.data("ready",!0)):n&&s.update()});return}}else{if(o==="image"||o==="swf")i.autoSize=!1,i.scrolling="visible";s.inner.append(t)}s._beforeShow()},_beforeShow:function(){s.trigger("beforeShow"),s._setDimension(),s.wrap.hide().removeClass("fancybox-tmp"),s.bindEvents(),s._preload(),s.transitions[s.isOpened?s.current.nextMethod:s.current.openMethod]()},_setDimension:function(){var t=s.wrap,n=s.outer,r=s.inner,i=s.current,o=s.getViewport(),u=i.margin,a=i.padding*2,f=i.width,l=i.height,c=i.maxWidth,h=i.maxHeight,p=i.minWidth,d=i.minHeight,v,m,g;o.w-=u[1]+u[3],o.h-=u[0]+u[2],(f+"").indexOf("%")>-1&&(f=(o.w-a)*parseFloat(f)/100),(l+"").indexOf("%")>-1&&(l=(o.h-a)*parseFloat(l)/100),v=f/l,f+=a,l+=a,i.fitToView&&(c=Math.min(o.w,c),h=Math.min(o.h,h)),p=Math.min(f,p),d=Math.min(l,d),c=Math.max(p,c),h=Math.max(d,h),i.aspectRatio?(f>c&&(f=c,l=(f-a)/v+a),l>h&&(l=h,f=(l-a)*v+a),f<p&&(f=p,l=(f-a)/v+a),l<d&&(l=d,f=(l-a)*v+a)):(f=Math.max(p,Math.min(f,c)),l=Math.max(d,Math.min(l,h))),f=Math.round(f),l=Math.round(l),e(t.add(n).add(r)).width("auto").height("auto"),r.width(f-a).height(l-a),t.width(f),m=t.height();if(f>c||m>h)while((f>c||m>h)&&f>p&&m>d)l-=10,i.aspectRatio?(f=Math.round((l-a)*v+a),f<p&&(f=p,l=(f-a)/v+a)):f-=10,r.width(f-a).height(l-a),t.width(f),m=t.height();i.dim={width:f,height:m},i.canGrow=i.autoSize&&l>d&&l<h,i.canShrink=!1,i.canExpand=!1,f-a<i.width||l-a<i.height?i.canExpand=!0:(f>o.w||m>o.h)&&f>p&&l>d&&(i.canShrink=!0),g=m-a,s.innerSpace=g-r.height(),s.outerSpace=g-n.height()},_getPosition:function(e){var t=s.current,n=s.getViewport(),r=t.margin,i=s.wrap.width()+r[1]+r[3],o=s.wrap.height()+r[0]+r[2],u={position:"absolute",top:r[0]+n.y,left:r[3]+n.x};return t.fixed&&(!e||e[0]===!1)&&o<=n.h&&i<=n.w&&(u={position:"fixed",top:r[0],left:r[3]}),u.top=Math.ceil(Math.max(u.top,u.top+(n.h-o)*t.topRatio))+"px",u.left=Math.ceil(Math.max(u.left,u.left+(n.w-i)*.5))+"px",u},_afterZoomIn:function(){var t=s.current,n=t.scrolling;s.isOpen=s.isOpened=!0,s.wrap.addClass("fancybox-opened").css("overflow","visible"),s.update(),s.inner.css("overflow",n==="yes"?"scroll":n==="no"?"hidden":n),(t.closeClick||t.nextClick)&&s.inner.css("cursor","pointer").bind("click.fb",t.nextClick?s.next:s.close),t.closeBtn&&e(t.tpl.closeBtn).appendTo(s.wrap).bind("click.fb",s.close),t.arrows&&s.group.length>1&&((t.loop||t.index>0)&&e(t.tpl.prev).appendTo(s.wrap).bind("click.fb",s.prev),(t.loop||t.index<s.group.length-1)&&e(t.tpl.next).appendTo(s.wrap).bind("click.fb",s.next)),s.trigger("afterShow"),s.opts.autoPlay&&!s.player.isActive&&(s.opts.autoPlay=!1,s.play())},_afterZoomOut:function(){s.trigger("afterClose"),s.wrap.trigger("onReset").remove(),e.extend(s,{group:{},opts:{},current:null,isActive:!1,isOpened:!1,isOpen:!1,wrap:null,outer:null,inner:null})}}),s.transitions={getOrigPosition:function(){var t=s.current,n=t.element,r=t.padding,i=e(t.orig),o={},u=50,a=50,f;return!i.length&&t.isDom&&e(n).is(":visible")&&(i=e(n).find("img:first"),i.length||(i=e(n))),i.length?(o=i.offset(),i.is("img")&&(u=i.outerWidth(),a=i.outerHeight())):(f=s.getViewport(),o.top=f.y+(f.h-a)*.5,o.left=f.x+(f.w-u)*.5),o={top:Math.ceil(o.top-r)+"px",left:Math.ceil(o.left-r)+"px",width:Math.ceil(u+r*2)+"px",height:Math.ceil(a+r*2)+"px"},o},step:function(e,t){var n,r,i;if(t.prop==="width"||t.prop==="height")r=i=Math.ceil(e-s.current.padding*2),t.prop==="height"&&(n=(e-t.start)/(t.end-t.start),t.start>t.end&&(n=1-n),r-=s.innerSpace*n,i-=s.outerSpace*n),s.inner[t.prop](r),s.outer[t.prop](i)},zoomIn:function(){var t=s.wrap,n=s.current,r,i,o=n.dim;n.openEffect==="elastic"?(i=e.extend({},o,s._getPosition(!0)),delete i.position,r=this.getOrigPosition(),n.openOpacity&&(r.opacity=0,i.opacity=1),s.outer.add(s.inner).width("auto").height("auto"),t.css(r).show().animate(i,{duration:n.openSpeed,easing:n.openEasing,step:this.step,complete:s._afterZoomIn})):(t.css(e.extend({},o,s._getPosition())),n.openEffect==="fade"?t.fadeIn(n.openSpeed,s._afterZoomIn):(t.show(),s._afterZoomIn()))},zoomOut:function(){var e=s.wrap,t=s.current,n;t.closeEffect==="elastic"?(e.css("position")==="fixed"&&e.css(s._getPosition(!0)),n=this.getOrigPosition(),t.closeOpacity&&(n.opacity=0),e.animate(n,{duration:t.closeSpeed,easing:t.closeEasing,step:this.step,complete:s._afterZoomOut})):e.fadeOut(t.closeEffect==="fade"?t.closeSpeed:0,s._afterZoomOut)},changeIn:function(){var e=s.wrap,t=s.current,n;t.nextEffect==="elastic"?(n=s._getPosition(!0),n.opacity=0,n.top=parseInt(n.top,10)-200+"px",e.css(n).show().animate({opacity:1,top:"+=200px"},{duration:t.nextSpeed,complete:s._afterZoomIn})):(e.css(s._getPosition()),t.nextEffect==="fade"?e.hide().fadeIn(t.nextSpeed,s._afterZoomIn):(e.show(),s._afterZoomIn()))},changeOut:function(){var t=s.wrap,n=s.current,r=function(){e(this).trigger("onReset").remove()};t.removeClass("fancybox-opened"),n.prevEffect==="elastic"?t.animate({opacity:0,top:"+=200px"},{duration:n.prevSpeed,complete:r}):t.fadeOut(n.prevEffect==="fade"?n.prevSpeed:0,r)}},s.helpers.overlay={overlay:null,update:function(){var t,s,o;this.overlay.width(0).height(0),e.browser.msie?(s=Math.max(n.documentElement.scrollWidth,n.body.scrollWidth),o=Math.max(n.documentElement.offsetWidth,n.body.offsetWidth),t=s<o?r.width():s):t=i.width(),this.overlay.width(t).height(i.height())},beforeShow:function(t){if(this.overlay)return;t=e.extend(!0,{speedIn:"fast",closeClick:!0,opacity:1,css:{background:"black"}},t),this.overlay=e('<div id="fancybox-overlay"></div>').css(t.css).appendTo("body"),this.update(),t.closeClick&&this.overlay.bind("click.fb",s.close),r.bind("resize.fb",e.proxy(this.update,this)),this.overlay.fadeTo(t.speedIn,t.opacity)},onUpdate:function(){this.update()},afterClose:function(t){this.overlay&&this.overlay.fadeOut(t.speedOut||0,function(){e(this).remove()}),this.overlay=null}},s.helpers.title={beforeShow:function(t){var n,r=s.current.title;r&&(n=e('<div class="fancybox-title fancybox-title-'+t.type+'-wrap">'+r+"</div>").appendTo("body"),t.type==="float"&&(n.width(n.width()),n.wrapInner('<span class="child"></span>'),s.current.margin[2]+=Math.abs(parseInt(n.css("margin-bottom"),10))),n.appendTo(t.type==="over"?s.inner:t.type==="outside"?s.wrap:s.outer))}},e.fn.fancybox=function(t){var n=e(this),r=this.selector||"",o,u=function(i){var u=this,a="rel",f=u[a],l=o;i.ctrlKey||i.altKey||i.shiftKey||i.metaKey||(i.preventDefault(),f||(a="data-fancybox-group",f=e(u).attr("data-fancybox-group")),f&&f!==""&&f!=="nofollow"&&(u=r.length?e(r):n,u=u.filter("["+a+'="'+f+'"]'),l=u.index(this)),t.index=l,s.open(u,t))};return t=t||{},o=t.index||0,r?i.undelegate(r,"click.fb-start").delegate(r,"click.fb-start",u):n.unbind("click.fb-start").bind("click.fb-start",u),this}})(window,document)};n(),t.resolveWith(n)})};dispatch("fancybox").containing(e).to("Foundry/2.1 Modules")})();